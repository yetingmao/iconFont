// Read-write a font file
'use strict';
var fs = require('fs');
var opentype = require('./src/opentype');

function toBuffer(ab) {
    var buffer = new Buffer(ab.byteLength);
    var view = new Uint8Array(ab);

    for (var i = 0; i < buffer.length; ++i) {
        buffer[i] = view[i];
    }

    return buffer;
}

opentype.load('fonts/Roboto-Black.ttf', function(err, font) {
    if (err) {
        console.log(err);
    } else {
        var arrayBuffer = font.toBuffer();
        var buffer = toBuffer(arrayBuffer);
        fs.writeFileSync('fonts/source-gen.otf', buffer);
        console.log('Written fonts/source-gen.otf');
    }

});
